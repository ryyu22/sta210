---
title: "Final Project"
author: "Ryan Yu"
format: pdf
---

## Introduction and data
```{r intro-1, echo = F}
library(tidyverse)
library(tidymodels)

one <- read_csv("test.csv")
two <- read_csv("train.csv")
airlines <- full_join(one, two)
airlines <- airlines |>
  mutate(
    satisfaction_binary = if_else(satisfaction == "satisfied", 1 , 0)
  )
airlines[, 9:22][airlines[, 9:22] == 0] <- NA

```
Air travel is an extremely popular form of transportation in the United States with over a million people flying every day. Everyone's experience is unique, whether they are travelling for work, vacation, school, etc. My research is motivated by the many different factors of air travel that contribute to a passenger's satisfaction. Understanding the factors that contribute to passenger satisfaction is crucial for airlines to improve their services. My research aims to answer the question: What are the most important factors that drive overall passenger satisfaction, and can we use these factors to predict customer satisfaction? My data set was collected through a US passenger satisfaction survey and compiled on Kaggle. The data set was originally split into "training" and "testing" data, which were random mutually exclusive parts of the same survey. In my research, the two data sets are recombined and an additional binary variable for satisfaction was added. Fourteen factors were included in the survey, with participants rating their satisfaction for each factor from 1 to 5, with 1 being least satisfied and 5 being most satisfied. Additionally, a rating of 0 corresponded to "Not Applicable", however I have changed the satisfaction levels of 0 to NA as to not skew the analysis. Other variables include gender, customer type (loyal/disloyal), age, type of travel (business/person), class of travel, flight distance, departure delay, arrival delay, and overall satisfaction.

```{r intro-2, echo = F}
airlines |>
  summarize(
    iws = mean(`Inflight wifi service`, na.rm = T),
    datc = mean(`Departure/Arrival time convenient`, na.rm = T),
    eob = mean(`Ease of Online booking`, na.rm = T),
    gl = mean(`Gate location`, na.rm = T),
    fad = mean(`Food and drink`, na.rm = T),
    ob = mean(`Online boarding`, na.rm = T),
    sc = mean(`Seat comfort`, na.rm = T),
    ife = mean(`Inflight entertainment`, na.rm = T),
    obs = mean(`On-board service`, na.rm = T),
    lrs = mean(`Leg room service`, na.rm = T),
    bh = mean(`Baggage handling`, na.rm = T),
    cis = mean(`Checkin service`, na.rm = T),
    ifs = mean(`Inflight service`, na.rm = T),
    c = mean(Cleanliness, na.rm = T)
  )

airlines2 <- airlines |>
  group_by(Age) |>
  count(satisfaction_binary == 1) |>
  pivot_wider(names_from = `satisfaction_binary == 1`, values_from = n) |>
  mutate(total = `TRUE` + `FALSE`,
  prop = `TRUE` / total)
airlines2 |>
  group_by(Age) |>
  ggplot(
    aes(
      x = Age,
      y = prop
    )
    ) +
      geom_point()
```
(will put this into a nicer looking graph later) The average satisfaction score varies between 2.81 for in-flight WiFi service to 3.64 for in-flight service.
The probability of being satisfied seems highest for middle age (40-60)people with low satisfaction levels for younger and older people.



This section includes an introduction to the project motivation, data, and research question. Describe the data and definitions of key variables. It should also include some exploratory data analysis. All of the EDA wonâ€™t fit in the paper, so focus on the EDA for the response variable and a few other interesting variables and relationships.

The research question and motivation are clearly stated in the introduction, including citations for the data source and any external research. The data are clearly described, including a description about how the data were originally collected and a concise definition of the variables relevant to understanding the report. The data cleaning process is clearly described, including any decisions made in the process (e.g., creating new variables, removing observations, etc.) The explanatory data analysis helps the reader better understand the observations in the data along with interesting and relevant relationships between the variables. It incorporates appropriate visualizations and summary statistics.